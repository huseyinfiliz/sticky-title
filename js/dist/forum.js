(()=>{var e={n:t=>{var r=t&&t.__esModule?()=>t.default:()=>t;return e.d(r,{a:r}),r},d:(t,r)=>{for(var o in r)e.o(r,o)&&!e.o(t,o)&&Object.defineProperty(t,o,{enumerable:!0,get:r[o]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{"use strict";const t=flarum.core.compat["common/extend"],r=flarum.core.compat["forum/components/PostStreamScrubber"];var o=e.n(r);const i=flarum.core.compat["forum/components/DiscussionPage"];var n=e.n(i);const a=flarum.core.compat["forum/components/PostStream"];var l=e.n(a);app.initializers.add("huseyinfiliz-sticky-title",function(){console.log("[huseyinfiliz/sticky-title] Forum loaded"),window.innerWidth<=767&&((0,t.extend)(l().prototype,"oncreate",function(){var e;(!app.forum||!app.forum.attribute||app.forum.attribute("stickyTitleBlogHeader"))&&app.current&&null!=(e=app.current.get("routeName"))&&e.startsWith("blogArticle")&&function(e){if(e){var t=e.title();if(t){var r=document.querySelector(".App-titleControl .Dropdown-toggle");if(!r)return;var o=r.querySelector(".Button-label"),i=r.querySelector(".Button-caret");if(o&&(o.style.display="none"),i&&(i.style.display="none"),r.querySelector(".PageTitle-container"))return;var n=document.createElement("div");n.className="PageTitle-container";var a=document.createElement("span");a.className="PageTitle-text",a.textContent=t.trim();var l=document.createElement("i");l.className="fas fa-sort PageTitle-sortIcon",n.appendChild(a),n.appendChild(l),r.prepend(n)}}}(this.attrs.discussion)}),(0,t.extend)(l().prototype,"onremove",function(){!function(){var e=document.querySelector(".App-titleControl .Dropdown-toggle");if(e){var t;null==(t=e.querySelector(".PageTitle-container"))||t.remove();var r=e.querySelector(".Button-label"),o=e.querySelector(".Button-caret");r&&(r.style.display=""),o&&(o.style.display="")}}()}));var e=0,r=null;(0,t.extend)(o().prototype,"oninit",function(t){this.showingTitle=!1;var r=this.attrs.stream.discussion;r&&this.lastDiscussionId!==r.id()&&(this.lastDiscussionId=r.id(),this.showingTitle=!1,e=0)}),(0,t.extend)(o().prototype,"view",function(e){window.innerWidth>767||"never"!==app.forum.attribute("stickyTitleMobileScroll")&&this.attrs.stream.discussion&&e&&e.attrs&&(e.attrs.className=(e.attrs.className||"")+(this.showingTitle?" showing-title":""))}),(0,t.extend)(o().prototype,"oncreate",function(t){var o=this;if(window.innerWidth<=767){var i=app.forum.attribute("stickyTitleMobileScroll");if("never"!==i){var n=this.attrs.stream.discussion;if(n){var a=this.element.querySelector(".Dropdown-toggle");if(a&&!a.querySelector(".MobileStickyTitle")){var l=a.innerHTML;a.innerHTML='<span class="MobileOriginalContent">'+l+'</span><span class="MobileStickyTitle">'+n.title()+"</span>"}r&&window.removeEventListener("scroll",r),r=function(){var t=window.pageYOffset||document.documentElement.scrollTop,r=t>e?"down":"up";e=t<=0?0:t;var n=!1;("always"===i||"scroll_down"===i&&"down"===r||"scroll_up"===i&&"up"===r)&&t>100&&(n=!0),o.showingTitle!==n&&(o.showingTitle=n,o.element.classList.toggle("showing-title",n))},window.addEventListener("scroll",r),this.scrollHandler=r}}}var s=app.forum.attribute("stickyTitleScrubberReplace"),c=window.innerWidth<=767;if("both"===s||"mobile"===s&&c||"desktop"===s&&!c){var p=this.attrs.stream.discussion;if(p){var u=this.element.querySelector(".Scrubber-first");if(u){var d=u.querySelector("i");u.innerHTML="",d&&(u.appendChild(d.cloneNode(!0)),u.appendChild(document.createTextNode(" ")));var m=document.createElement("span");m.className="ScrubberTitle",m.textContent=p.title(),m.title=p.title(),u.appendChild(m)}}}}),(0,t.extend)(o().prototype,"onupdate",function(e){var t=app.forum.attribute("stickyTitleScrubberReplace"),r=window.innerWidth<=767;if("both"===t||"mobile"===t&&r||"desktop"===t&&!r){var o=this.attrs.stream.discussion;if(o){var i=this.element.querySelector(".Scrubber-first");if(i&&!i.querySelector(".ScrubberTitle")){var n=i.querySelector("i");i.innerHTML="",n&&(i.appendChild(n.cloneNode(!0)),i.appendChild(document.createTextNode(" ")));var a=document.createElement("span");a.className="ScrubberTitle",a.textContent=o.title(),a.title=o.title(),i.appendChild(a)}}}}),(0,t.extend)(o().prototype,"onremove",function(){this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=null)}),(0,t.extend)(n().prototype,"sidebarItems",function(e){var t=this;if(app.forum.attribute("stickyTitleWebScrubber")&&!(window.innerWidth<=767)){var r=this.discussion;if(r){var o=r.tags(),i=app.forum.attribute("stickyTitleTagColorStyle")||"background";e.add("sticky-title",m(".StickyTitlePanel",[m(".StickyTitlePanel-container",{onclick:function(){return t.stream&&t.stream.goToNumber(1)},style:"cursor: pointer;"},[m(".StickyTitlePanel-header",[m(".StickyTitlePanel-label",r.title())]),m(".StickyTitlePanel-content",[o&&o.length>0?m(".StickyTitlePanel-tags",{className:"tag-style-"+i},o.map(function(e){var t="",r=["TagLabel",e.isChild()&&"TagLabel--child"].filter(Boolean),o=e.color()||"#888";return"background"===i?t="background-color: "+o+" !important; color: #fff !important; border: none !important;":"text"===i?t="color: "+o+" !important; background-color: transparent !important; border: 1px solid var(--control-bg) !important;":"border"===i&&(t="border: 2px solid "+o+" !important; color: var(--text-color) !important; background-color: transparent !important;"),m("span.TagLabel",{style:t,className:r.join(" ")},[e.icon()&&m("span.TagLabel-icon",m("i",{className:e.icon()})),m("span.TagLabel-text",e.name())])})):m(".StickyTitlePanel-meta",[m("span.StickyTitlePanel-arrow",m("i.fas.fa-arrow-up")),m("span",app.translator.trans("core.forum.post_scrubber.original_post_link"))])])])]),1)}}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map
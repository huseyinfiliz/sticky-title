(()=>{var e={n:t=>{var i=t&&t.__esModule?()=>t.default:()=>t;return e.d(i,{a:i}),i},d:(t,i)=>{for(var n in i)e.o(i,n)&&!e.o(t,n)&&Object.defineProperty(t,n,{enumerable:!0,get:i[n]})},o:(e,t)=>Object.prototype.hasOwnProperty.call(e,t)};(()=>{"use strict";const t=flarum.core.compat["common/extend"],i=flarum.core.compat["forum/components/PostStreamScrubber"];var n=e.n(i);const r=flarum.core.compat["forum/components/DiscussionPage"];var o=e.n(r);app.initializers.add("huseyinfiliz/sticky-title",function(){console.log("[huseyinfiliz/sticky-title] Forum loaded");var e=0,i=null;(0,t.extend)(n().prototype,"oninit",function(t){this.showingTitle=!1;var i=this.attrs.stream.discussion;i&&this.lastDiscussionId!==i.id()&&(this.lastDiscussionId=i.id(),this.showingTitle=!1,e=0)}),(0,t.extend)(n().prototype,"view",function(e){window.innerWidth>767||"never"!==app.forum.attribute("stickyTitleMobileScroll")&&this.attrs.stream.discussion&&e&&e.attrs&&(e.attrs.className=(e.attrs.className||"")+(this.showingTitle?" showing-title":""))}),(0,t.extend)(n().prototype,"oncreate",function(t){var n=this;if(!(window.innerWidth>767)){var r=app.forum.attribute("stickyTitleMobileScroll");if("never"!==r){var o=this.attrs.stream.discussion;if(o){var a=this.element.querySelector(".Dropdown-toggle");if(a&&!a.querySelector(".MobileStickyTitle")){var l=a.innerHTML;a.innerHTML='\n        <span class="MobileOriginalContent">'+l+'</span>\n        <span class="MobileStickyTitle">'+o.title()+"</span>\n      "}i&&window.removeEventListener("scroll",i),i=function(){var t=window.pageYOffset||document.documentElement.scrollTop,i=t>e?"down":"up";e=t<=0?0:t;var o=!1;("always"===r&&t>100||"scroll_down"===r&&"down"===i&&t>100||"scroll_up"===r&&"up"===i&&t>100)&&(o=!0),n.showingTitle!==o&&(n.showingTitle=o,n.element.classList.toggle("showing-title",o))},window.addEventListener("scroll",i),this.scrollHandler=i}}}}),(0,t.extend)(n().prototype,"onremove",function(){this.scrollHandler&&(window.removeEventListener("scroll",this.scrollHandler),this.scrollHandler=null)}),(0,t.extend)(n().prototype,"oncreate",function(e){if(app.forum.attribute("stickyTitleScrubberReplace")){var t=this.attrs.stream.discussion;if(t){var i=this.element.querySelector(".Scrubber-first");if(i){var n=i.querySelector("i");i.innerHTML="",n&&(i.appendChild(n.cloneNode(!0)),i.appendChild(document.createTextNode(" ")));var r=document.createElement("span");r.className="ScrubberTitle",r.textContent=t.title(),r.title=t.title(),i.appendChild(r)}}}}),(0,t.extend)(n().prototype,"onupdate",function(e){if(app.forum.attribute("stickyTitleScrubberReplace")){var t=this.attrs.stream.discussion;if(t){var i=this.element.querySelector(".Scrubber-first");if(i&&!i.querySelector(".ScrubberTitle")){var n=i.querySelector("i");i.innerHTML="",n&&(i.appendChild(n.cloneNode(!0)),i.appendChild(document.createTextNode(" ")));var r=document.createElement("span");r.className="ScrubberTitle",r.textContent=t.title(),r.title=t.title(),i.appendChild(r)}}}}),(0,t.extend)(o().prototype,"sidebarItems",function(e){var t=this;if(app.forum.attribute("stickyTitleWebScrubber")&&!(window.innerWidth<=767)){var i=this.discussion;if(i){var n=i.tags();e.add("sticky-title",m(".StickyTitlePanel",[m(".StickyTitlePanel-container",{onclick:function(){var e=t.stream;e&&e.goToNumber(1)},style:"cursor: pointer;"},[m(".StickyTitlePanel-header",[m(".StickyTitlePanel-label",i.title())]),m(".StickyTitlePanel-content",[n&&n.length>0?m(".StickyTitlePanel-tags",n.map(function(e){return m("span.TagLabel",{style:e.color()?"background-color: "+e.color()+";":"",className:e.isChild()?"TagLabel--child":""},[e.icon()?m("span.TagLabel-icon",m("i",{className:e.icon()})):null,m("span.TagLabel-text",e.name())])})):m(".StickyTitlePanel-meta",[m("span.StickyTitlePanel-arrow",m("i.fas.fa-arrow-up")),m("span",app.translator.trans("core.forum.post_scrubber.original_post_link"))])])])]),1)}}})})})(),module.exports={}})();
//# sourceMappingURL=forum.js.map
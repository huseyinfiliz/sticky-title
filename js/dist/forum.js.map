{"version":3,"file":"forum.js","mappings":"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","sources":["webpack://@huseyinfiliz/sticky-title/webpack/bootstrap","webpack://@huseyinfiliz/sticky-title/webpack/runtime/compat get default export","webpack://@huseyinfiliz/sticky-title/webpack/runtime/define property getters","webpack://@huseyinfiliz/sticky-title/webpack/runtime/hasOwnProperty shorthand","webpack://@huseyinfiliz/sticky-title/external root \"flarum.core.compat['common/extend']\"","webpack://@huseyinfiliz/sticky-title/external root \"flarum.core.compat['forum/components/PostStreamScrubber']\"","webpack://@huseyinfiliz/sticky-title/external root \"flarum.core.compat['forum/components/DiscussionPage']\"","webpack://@huseyinfiliz/sticky-title/./src/forum/index.js"],"sourcesContent":["// The require scope\nvar __webpack_require__ = {};\n\n","// getDefaultExport function for compatibility with non-harmony modules\n__webpack_require__.n = (module) => {\n\tvar getter = module && module.__esModule ?\n\t\t() => (module['default']) :\n\t\t() => (module);\n\t__webpack_require__.d(getter, { a: getter });\n\treturn getter;\n};","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['common/extend'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/PostStreamScrubber'];","const __WEBPACK_NAMESPACE_OBJECT__ = flarum.core.compat['forum/components/DiscussionPage'];","import { extend, override } from 'flarum/common/extend';\nimport PostStreamScrubber from 'flarum/forum/components/PostStreamScrubber';\nimport DiscussionPage from 'flarum/forum/components/DiscussionPage';\n\napp.initializers.add('huseyinfiliz/sticky-title', () => {\n  console.log('[huseyinfiliz/sticky-title] Forum loaded');\n  \n  // Mobil header'da scroll'a göre başlık gösterimi\n  let lastScrollTop = 0;\n  let scrollHandler = null;\n  \n  extend(PostStreamScrubber.prototype, 'oninit', function(vnode) {\n    this.showingTitle = false;\n    // Discussion değiştiğinde state'i sıfırla\n    const discussion = this.attrs.stream.discussion;\n    if (discussion && this.lastDiscussionId !== discussion.id()) {\n      this.lastDiscussionId = discussion.id();\n      this.showingTitle = false;\n      lastScrollTop = 0;\n    }\n  });\n  \n  extend(PostStreamScrubber.prototype, 'view', function(vnode) {\n    // Mobil kontrol\n    if (window.innerWidth > 767) return;\n    \n    const mobileScrollDirection = app.forum.attribute('stickyTitleMobileScroll');\n    if (mobileScrollDirection === 'never') return;\n    \n    const discussion = this.attrs.stream.discussion;\n    if (!discussion) return;\n    \n    // Component'e class ekle\n    if (vnode && vnode.attrs) {\n      vnode.attrs.className = (vnode.attrs.className || '') + (this.showingTitle ? ' showing-title' : '');\n    }\n  });\n  \n  extend(PostStreamScrubber.prototype, 'oncreate', function(vnode) {\n    // Mobil kontrol\n    if (window.innerWidth > 767) return;\n    \n    const mobileScrollDirection = app.forum.attribute('stickyTitleMobileScroll');\n    if (mobileScrollDirection === 'never') return;\n    \n    const discussion = this.attrs.stream.discussion;\n    if (!discussion) return;\n    \n    // Button içeriğini wrap et\n    const button = this.element.querySelector('.Dropdown-toggle');\n    if (button && !button.querySelector('.MobileStickyTitle')) {\n      // Orijinal içeriği wrap et\n      const originalHTML = button.innerHTML;\n      button.innerHTML = `\n        <span class=\"MobileOriginalContent\">${originalHTML}</span>\n        <span class=\"MobileStickyTitle\">${discussion.title()}</span>\n      `;\n    }\n    \n    // Önceki handler'ı temizle\n    if (scrollHandler) {\n      window.removeEventListener('scroll', scrollHandler);\n    }\n    \n    // Yeni scroll handler\n    scrollHandler = () => {\n      const scrollTop = window.pageYOffset || document.documentElement.scrollTop;\n      const scrollDirection = scrollTop > lastScrollTop ? 'down' : 'up';\n      lastScrollTop = scrollTop <= 0 ? 0 : scrollTop;\n      \n      let shouldShowTitle = false;\n      \n      if (mobileScrollDirection === 'always' && scrollTop > 100) {\n        shouldShowTitle = true;\n      } else if (mobileScrollDirection === 'scroll_down' && scrollDirection === 'down' && scrollTop > 100) {\n        shouldShowTitle = true;\n      } else if (mobileScrollDirection === 'scroll_up' && scrollDirection === 'up' && scrollTop > 100) {\n        shouldShowTitle = true;\n      }\n      \n      if (this.showingTitle !== shouldShowTitle) {\n        this.showingTitle = shouldShowTitle;\n        this.element.classList.toggle('showing-title', shouldShowTitle);\n      }\n    };\n    \n    window.addEventListener('scroll', scrollHandler);\n    this.scrollHandler = scrollHandler;\n  });\n  \n  extend(PostStreamScrubber.prototype, 'onremove', function() {\n    if (this.scrollHandler) {\n      window.removeEventListener('scroll', this.scrollHandler);\n      this.scrollHandler = null;\n    }\n  });\n  \n  // Scrubber'da \"Original Post\" / \"İlk Gönderi\" yerine tartışma başlığını göster\n  extend(PostStreamScrubber.prototype, 'oncreate', function(vnode) {\n    // Admin panel'den ayarı kontrol et\n    const replaceNow = app.forum.attribute('stickyTitleScrubberReplace');\n    \n    if (!replaceNow) return;\n    \n    // Mevcut tartışmayı al\n    const discussion = this.attrs.stream.discussion;\n    \n    if (!discussion) return;\n    \n    // DOM hazır olduğunda elementi bul ve değiştir\n    const scrubberFirst = this.element.querySelector('.Scrubber-first');\n    \n    if (scrubberFirst) {\n      // Icon'u koru\n      const icon = scrubberFirst.querySelector('i');\n      \n      // İçeriği temizle ve yeniden oluştur\n      scrubberFirst.innerHTML = '';\n      \n      if (icon) {\n        scrubberFirst.appendChild(icon.cloneNode(true));\n        scrubberFirst.appendChild(document.createTextNode(' '));\n      }\n      \n      // Başlık span'ini ekle\n      const titleSpan = document.createElement('span');\n      titleSpan.className = 'ScrubberTitle';\n      titleSpan.textContent = discussion.title();\n      titleSpan.title = discussion.title();\n      \n      scrubberFirst.appendChild(titleSpan);\n    }\n  });\n  \n  // Scrubber güncellendiğinde de çalıştır\n  extend(PostStreamScrubber.prototype, 'onupdate', function(vnode) {\n    const replaceNow = app.forum.attribute('stickyTitleScrubberReplace');\n    \n    if (!replaceNow) return;\n    \n    const discussion = this.attrs.stream.discussion;\n    \n    if (!discussion) return;\n    \n    const scrubberFirst = this.element.querySelector('.Scrubber-first');\n    \n    if (scrubberFirst && !scrubberFirst.querySelector('.ScrubberTitle')) {\n      const icon = scrubberFirst.querySelector('i');\n      \n      scrubberFirst.innerHTML = '';\n      \n      if (icon) {\n        scrubberFirst.appendChild(icon.cloneNode(true));\n        scrubberFirst.appendChild(document.createTextNode(' '));\n      }\n      \n      const titleSpan = document.createElement('span');\n      titleSpan.className = 'ScrubberTitle';\n      titleSpan.textContent = discussion.title();\n      titleSpan.title = discussion.title();\n      \n      scrubberFirst.appendChild(titleSpan);\n    }\n  });\n  \n  // Desktop'ta sidebar'a tartışma başlığı item'ı ekle\n  extend(DiscussionPage.prototype, 'sidebarItems', function(items) {\n    // Admin panel'den ayarı kontrol et\n    const showWebTitle = app.forum.attribute('stickyTitleWebScrubber');\n    \n    if (!showWebTitle) return;\n    \n    // Sadece desktop'ta göster\n    if (window.innerWidth <= 767) return;\n    \n    const discussion = this.discussion;\n    \n    if (!discussion) return;\n    \n    // İlk posta gitme fonksiyonu\n    const scrollToFirst = () => {\n      const stream = this.stream;\n      if (stream) {\n        stream.goToNumber(1);\n      }\n    };\n    \n    // Tartışmanın etiketlerini al\n    const tags = discussion.tags();\n    \n    // Tartışma başlığı item'ını ekle\n    items.add('sticky-title',\n      m('.StickyTitlePanel', [\n        m('.StickyTitlePanel-container', {\n          onclick: scrollToFirst,\n          style: 'cursor: pointer;'\n        }, [\n          m('.StickyTitlePanel-header', [\n            m('.StickyTitlePanel-label', discussion.title())\n          ]),\n          m('.StickyTitlePanel-content', [\n            tags && tags.length > 0 ? \n              m('.StickyTitlePanel-tags', \n                tags.map(tag => \n                  m('span.TagLabel', {\n                    style: tag.color() ? `background-color: ${tag.color()};` : '',\n                    className: tag.isChild() ? 'TagLabel--child' : ''\n                  }, [\n                    tag.icon() ? m('span.TagLabel-icon', m('i', { className: tag.icon() })) : null,\n                    m('span.TagLabel-text', tag.name())\n                  ])\n                )\n              ) : \n              m('.StickyTitlePanel-meta', [\n                m('span.StickyTitlePanel-arrow', m('i.fas.fa-arrow-up')),\n                m('span', app.translator.trans('core.forum.post_scrubber.original_post_link'))\n              ])\n          ])\n        ])\n      ]),\n      1 // Scrubber'ın priority'si 100, onun hemen üstünde olsun\n    );\n  });\n});"],"names":["__webpack_require__","module","getter","__esModule","d","a","exports","definition","key","o","Object","defineProperty","enumerable","get","obj","prop","prototype","hasOwnProperty","call","flarum","core","compat","app","initializers","add","console","log","lastScrollTop","scrollHandler","extend","PostStreamScrubber","vnode","this","showingTitle","discussion","attrs","stream","lastDiscussionId","id","window","innerWidth","forum","attribute","className","_this","mobileScrollDirection","button","element","querySelector","originalHTML","innerHTML","title","removeEventListener","scrollTop","pageYOffset","document","documentElement","scrollDirection","shouldShowTitle","classList","toggle","addEventListener","scrubberFirst","icon","appendChild","cloneNode","createTextNode","titleSpan","createElement","textContent","DiscussionPage","items","_this2","tags","m","onclick","goToNumber","style","length","map","tag","color","isChild","name","translator","trans"],"sourceRoot":""}